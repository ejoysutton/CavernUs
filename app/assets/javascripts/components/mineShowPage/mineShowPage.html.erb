<div class="align-center">
  <img src="https://image.ibb.co/iF13qk/cavern_Us_Logo_Sm.png">
</div>
<div class="text-center col-md-4 col-md-offset-4">
  <h1>{{ $ctrl.mine.name }}</h1>
  <h3>{{ $ctrl.mine.address }}</h3>
  <h4>{{ $ctrl.mine.description }}</h4>

</div>
<a href="#" class="btn btn-default col-md-1 col-md-offset-5"
   data-toggle="modal"
   data-target="#addPostModal">Add a Post</a>
<a href="#" class="btn btn-default col-md-1"
   data-toggle="modal"
   data-target="#addTripModal">Add a Trip</a>
<div class="clearfix"></div>
<hr>

<!--Mine Card Area-->

<!--Mine Posts-->
<div class="text-center col-md-4 col-md-offset-4">
  <h3>Posts</h3>
</div>
<div class="card-row card-deck">
  <div class="card-area card-wide card-group col-md-8" ng-repeat="post in $ctrl.mine.posts">
    <div class="card user-card">
      <!--<img class="card-img-top" ng-src="{{user.avatar_url}}" alt="Card image cap">-->
      <div class="card-header">
        <!--<a ui-sref="mineShow({ mineId: mine.id })" class="btn btn-primary align-self-end">View Mine</a>-->
      </div>
      <div class="card-block align-self-stretch">
        <h4 class="card-title">{{ post.title }}</h4>
        <p class="card-text">{{ post.username }}</p>
        <p class="card-text">{{ post.content }}</p>
        <button ng-show="post.user_id == $ctrl.mine.current_user" ng-click="$ctrl.deletePost(post)">Delete Post</button>

        <!--<button type="button" class="btn btn-danger" ng-click="$ctrl.deleteMine(mine)">Delete Mine</button>-->
      </div>
    </div>
  </div>
</div>

<!--Mine Trips-->
<div class="text-center col-md-4 col-md-offset-4">
  <h3>Trips</h3>
</div>
<div class="card-row card-deck">
  <div class="card-area card-wide card-group col-md-8" ng-repeat="trip in $ctrl.mine.trips">
    <div class="card user-card">
      <!--<img class="card-img-top" ng-src="{{user.avatar_url}}" alt="Card image cap">-->
      <div class="card-header">
        <!--<a ui-sref="mineShow({ mineId: mine.id })" class="btn btn-primary align-self-end">View Mine</a>-->
      </div>
      <div class="card-block align-self-stretch">
        <h4 class="card-title">{{ trip.date }}</h4>
        <p class="card-text">{{ trip.description }}</p>
        {{trip.id}}
        <button ng-hide="trip.user.user_id == $ctrl.mine.current_user" ng-click="$ctrl.addMemberToTrip(trip.id)">Join Trip</button>
        <hr>
        <div ng-repeat="user in trip.users">
          <p class="card-text">{{ user.username }}</p>
          <p class="card-text">{{ user.avatar_url }}</p>
          <button ng-show="user.user_id == $ctrl.mine.current_user" ng-click="$ctrl.removeMemberFromTrip(user.member_id)">Leave Trip</button>
        </div>
        <!--<button type="button" class="btn btn-danger" ng-click="$ctrl.deleteMine(mine)">Delete Mine</button>-->
      </div>
    </div>
  </div>
</div>


<!--Add Post Modal-->

<div class="modal fade" id="addPostModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
        <h4 class="modal-title" id="myModalLabel">Add a Post to This Mine</h4>
      </div>
      <div class="modal-body">
        <form>
          <label>Post Title</label>
          <input ng-model="$ctrl.newPost.title" />
          <br/>

          <label>Post Content</label>
          <input ng-model="$ctrl.newPost.content" />
          <br/>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-default"  data-dismiss="modal" ng-click="$ctrl.saveNewPost()">Create Post</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!--Add Trip Modal-->

<div class="modal fade" id="addTripModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
        <h4 class="modal-title" id="myModalLabel">Add a Trip to This Mine</h4>
      </div>
      <div class="modal-body">
        <form>
          <label>Trip Date</label>
          <input type="date" ng-model="$ctrl.newTrip.date" />
          <br/>

          <label>Trip Description</label>
          <input ng-model="$ctrl.newTrip.description" />
          <br/>


      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-default"  data-dismiss="modal" ng-click="$ctrl.saveNewTrip()">Create Trip</button>
        </form>
      </div>
    </div>
  </div>
</div>
















<h1>CavernUs Mine Show Page</h1>

<p>Name: {{ $ctrl.mine.name }}</p>
<p>Description: {{ $ctrl.mine.description }}</p>
<p>Address: {{ $ctrl.mine.address }}</p>

<hr>
<h3>Posts</h3>

  <div ng-repeat="post in $ctrl.mine.posts">
  Posts: {{ post.title }}
  </div>

<hr>
<h3>Trips</h3>
<div ng-repeat="trip in $ctrl.mine.trips">
  Trips: {{ trip.description }}
  <div ng-repeat="member in trip.trip_members">
  Hounds: {{ member }}
  </div>
</div>
<hr>

<h3>Add a new Post</h3>
<form>
  <label>Post Title</label>
  <input ng-model="$ctrl.newPost.title" />
  <br/>

  <label>Post Content</label>
  <input ng-model="$ctrl.newPost.content" />
  <br/>

  <button ng-click="$ctrl.saveNewPost()">Create Post</button>
</form>
<hr>

<h3>Add a new Trip</h3>
<form>
  <label>Trip Date</label>
  <input type="date" ng-model="$ctrl.newTrip.date" />
  <br/>

  <label>Trip Description</label>
  <input ng-model="$ctrl.newTrip.description" />
  <br/>

  <button ng-click="$ctrl.saveNewTrip()">Create Trip</button>
</form>

<hr>
<h3>Edit Mine</h3>
<form>
  <label>Mine Name</label>
  <input ng-model="$ctrl.mine.name" />
  <br/>

  <label>Mine Location</label>
  <input ng-model="$ctrl.mine.address" />
  <br/>

  <label>Mine Description</label>
  <textarea ng-model="$ctrl.mine.description"></textarea>
  <br/>

  <button ng-click="$ctrl.saveMine()">Update Mine</button>
</form>

{{ $ctrl.mine }}
<hr>
